<div class="portfolio-container">
  <h1>My Portfolio</h1>
  <div *ngIf="stocks && stocks.length > 0; else noStocksTemplate">
    <p>Total Portfolio Value: {{ (walletBalance) | currency:'USD':'symbol' }}</p>
    <table class="table">
      <thead>
        <tr>
          <th>Stock Ticker</th>
          <th>Company Name</th>
          <th>Shares</th>
          <th>Average Cost</th>
          <th>Change</th>
          <th>Current Price</th>
          <th>Total Value</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let stock of stocks">
          <td>{{ stock.ticker }}</td>
          <td>{{ stock.name }}</td>
          <td>{{ stock.shares }}</td>
          <td>{{ stock.averageCost | currency }}</td>
          <td [ngClass]="calculateClass(stock)">
            <span *ngIf="calculateClass(stock) === 'profit'" class="profit">&#8593;{{ calculateChangeInPrice(stock) | number:'1.2-2' }}</span>
            <span *ngIf="calculateClass(stock) === 'loss'" class="loss">&#8593;{{ calculateChangeInPrice(stock) | number:'1.2-2' }}</span>
            <span *ngIf="calculateClass(stock) === 'unchanged'" class="unchanged">{{ calculateChangeInPrice(stock) | number:'1.2-2' }}</span>
          </td>
          <td>{{ stock.currentPrice | currency:'USD':'symbol' }}</td>
          <td>{{ (stock.currentPrice * stock.shares) | currency:'USD':'symbol' }}</td>
          <td>
            <button class="btn btn-primary" (click)="openBuyModal(stock)">Buy</button>
            <button class="btn btn-danger" (click)="openSellModal(stock)">Sell</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <ng-template #noStocksTemplate>
    <p>You currently have no stocks in your portfolio.</p>
  </ng-template>
</div>
